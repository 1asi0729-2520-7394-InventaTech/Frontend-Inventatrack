import{b as L,c as W,f as z,i as B,j,k as A,m as H}from"./chunk-XXPJG6AZ.js";import{b as k}from"./chunk-GRKWHWZV.js";import{Aa as P,Bb as E,Db as D,Fb as S,Ga as v,Gb as F,La as g,X as c,Y as m,ab as s,ac as T,bb as i,bc as N,cb as n,cc as u,dc as V,hb as b,ib as _,jb as h,qb as O,rb as I,tb as a,ub as f,va as p,vb as w,xb as C,yb as y,zb as M}from"./chunk-FEO5VZBH.js";import"./chunk-FDERIQAA.js";function U(r,e){if(r&1&&(i(0,"option",7),a(1),n()),r&2){let t=e.$implicit;s("value",t),p(),w(" ",t," ")}}function K(r,e){r&1&&(i(0,"span"),a(1,"\u{1F6D1} VENCIDO"),n())}function R(r,e){r&1&&(i(0,"span"),a(1,"\u26A0\uFE0F Por vencer"),n())}function G(r,e){r&1&&(i(0,"span"),a(1,"\u2705 OK"),n())}function J(r,e){if(r&1&&(i(0,"tr")(1,"td"),a(2),n(),i(3,"td"),a(4),n(),i(5,"td"),a(6),n(),i(7,"td"),a(8),D(9,"date"),n(),i(10,"td"),g(11,K,2,0,"span",9)(12,R,2,0,"span",9)(13,G,2,0,"span",9),n()()),r&2){let t=e.$implicit,o=h(2);I("expired",o.isExpired(t.expirationDate))("near-expiration",o.isNearExpiration(t.expirationDate)),p(2),f(t.id),p(2),f(t.name),p(2),f(t.quantity),p(2),f(S(9,11,t.expirationDate,"dd/MM/yyyy")),p(3),s("ngIf",o.isExpired(t.expirationDate)),p(),s("ngIf",o.isNearExpiration(t.expirationDate)&&!o.isExpired(t.expirationDate)),p(),s("ngIf",!o.isNearExpiration(t.expirationDate)&&!o.isExpired(t.expirationDate))}}function Q(r,e){if(r&1&&(i(0,"table")(1,"thead")(2,"tr")(3,"th"),a(4,"ID"),n(),i(5,"th"),a(6,"Nombre"),n(),i(7,"th"),a(8,"Cantidad"),n(),i(9,"th"),a(10,"Fecha de Vencimiento"),n(),i(11,"th"),a(12,"Estado"),n()()(),i(13,"tbody"),g(14,J,14,14,"tr",8),n()()),r&2){let t=h();p(14),s("ngForOf",t.filteredProducts)}}function X(r,e){r&1&&(i(0,"p"),a(1,"No hay productos disponibles para el mes seleccionado."),n())}var q=class r{constructor(e){this.http=e}allData=[];products=[];filteredProducts=[];months=[];selectedMonth="";searchTerm="";errorMessage="";isLoading=!0;apiUrl="https://fake-inventory-api-pb0q.onrender.com/inventory";ngOnInit(){this.fetchInventory()}fetchInventory(){this.isLoading=!0,this.http.get(this.apiUrl).subscribe({next:e=>{this.allData=e,this.months=e.map(t=>t.month),this.months.length>0?(this.selectedMonth=this.months[this.months.length-1],this.updateFilteredProducts()):(this.products=[],this.filteredProducts=[]),this.isLoading=!1},error:e=>{console.error("Error al obtener inventario:",e),this.errorMessage="Error al cargar el inventario. Intenta m\xE1s tarde.",this.isLoading=!1}})}updateFilteredProducts(){let e=this.allData.find(t=>t.month===this.selectedMonth);e?(this.products=e.products,this.applyFilters()):(this.products=[],this.filteredProducts=[])}applyFilters(){this.filteredProducts=this.products.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase()))}isExpired(e){let t=new Date;return new Date(e)<t}isNearExpiration(e){let t=new Date,l=(new Date(e).getTime()-t.getTime())/(1e3*3600*24);return l<=7&&l>0}static \u0275fac=function(t){return new(t||r)(P(k))};static \u0275cmp=v({type:r,selectors:[["app-inventory"]],features:[E([u])],decls:10,vars:5,consts:[["noProducts",""],[1,"inventory-container"],[1,"filters"],["type","text","placeholder","\u{1F50D} Buscar por nombre...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"value"],[3,"expired","near-expiration",4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,o){if(t&1){let l=b();i(0,"div",1)(1,"h2"),a(2,"Inventario de Productos"),n(),i(3,"div",2)(4,"input",3),M("ngModelChange",function(d){return c(l),y(o.searchTerm,d)||(o.searchTerm=d),m(d)}),_("input",function(){return c(l),m(o.applyFilters())}),n(),i(5,"select",4),M("ngModelChange",function(d){return c(l),y(o.selectedMonth,d)||(o.selectedMonth=d),m(d)}),_("change",function(){return c(l),m(o.updateFilteredProducts())}),g(6,U,2,2,"option",5),n()(),g(7,Q,15,1,"table",6)(8,X,2,0,"ng-template",null,0,F),n()}if(t&2){let l=O(9);p(4),C("ngModel",o.searchTerm),p(),C("ngModel",o.selectedMonth),p(),s("ngForOf",o.months),p(),s("ngIf",o.filteredProducts.length>0)("ngIfElse",l)}},dependencies:[V,T,N,H,j,A,L,B,W,z,u],styles:[".inventory-container[_ngcontent-%COMP%]{max-width:1000px;margin:40px auto;padding:20px 20px 140px;background-color:#fff;border-radius:16px;box-shadow:0 6px 18px #0000001a;font-family:Poppins,sans-serif}.inventory-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#0a3d62;margin-bottom:25px;font-weight:600}.filters[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:15px;margin-bottom:25px}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;min-width:220px;padding:10px 14px;border:1px solid #ccc;border-radius:10px;font-size:15px;transition:all .3s ease}.filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#0a3d62;box-shadow:0 0 6px #0a3d624d}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;overflow:hidden;border-radius:12px;box-shadow:0 3px 12px #0000000d}thead[_ngcontent-%COMP%]{background-color:#0a3d62;color:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:left;padding:14px;font-size:15px}th[_ngcontent-%COMP%]{font-weight:500;letter-spacing:.5px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.expired[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ffe6e6!important;color:#c0392b;font-weight:500}.near-expiration[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff4e1!important;color:#e67e22;font-weight:500}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(.expired):not(.near-expiration):hover{background-color:#eaf4ff;transition:background .3s ease}p[_ngcontent-%COMP%]{text-align:center;color:#555;font-size:16px;margin-top:20px}@media (max-width: 768px){.filters[_ngcontent-%COMP%]{flex-direction:column}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]{display:none}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:15px;background-color:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;padding:12px}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;display:flex;justify-content:space-between;padding:8px 0;font-size:14px}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:600;color:#0a3d62}}"]})};export{q as InventoryComponent};
